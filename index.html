<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Expert Truth Detector</title>
    <style>
        body { background: #000; color: #ffbf00; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; transition: background 0.5s; }
        #p-wrap { width: 80%; height: 6px; background: #222; border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        #p-bar { width: 0%; height: 100%; background: #ffbf00; box-shadow: 0 0 15px #ffbf00; transition: 0.4s; }
        #status { font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 40px; text-align: center; min-height: 60px; padding: 0 20px; line-height: 1.4; }
        .amber-btn {
            width: 85%; height: 85px; background: #111; color: #ffbf00; border: 3px solid #ffbf00;
            border-radius: 20px; font-size: 1.3rem; font-weight: 900;
            box-shadow: 0 0 5px rgba(255,191,0,0.2); transition: all 0.1s;
            -webkit-tap-highlight-color: transparent; outline: none; opacity: 0.3; pointer-events: none;
        }
        .amber-btn.active-ready { opacity: 1; pointer-events: auto; }
        .amber-btn:active {
            transform: scale(0.96); background: #221a00;
            box-shadow: 0 0 50px #ffbf00, inset 0 0 20px #ffbf00;
        }
    </style>
</head>
<body>

    <div id="p-wrap"><div id="p-bar"></div></div>
    <div id="status">INITIALIZING...</div>
    <button id="scanBtn" class="amber-btn">HOLD TO ANSWER</button>

    <script>
        const btn = document.getElementById('scanBtn');
        const bar = document.getElementById('p-bar');
        const status = document.getElementById('status');
        const alarmSound = new Audio('https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg');

        const introPhrases = [
            "DO NOT ATTEMPT TO LIE...",
            "I AM AN EXPERT AT DETECTING HUMAN LIES.",
            "MEASURING BASELINE BIOMETRICS..."
        ];

       const questions = [
            // PHASE 1: BASELINE (1-10) - Calm & Benign
            "Is it 2026?", "Are you holding a phone?", "Is the sky blue?",
            "Do you like music?", "Is your name correct?", "Is it daytime?",
            "Is the button Amber?", "Are you human?", "Are you sitting down?",
            "HAVE YOU EVER STOLEN ANY SMALL ITEM?",

            // PHASE 2: PROBING (11-30) - Slight Tension
            "Do you consider yourself an honest person?", "Have you ever lied to a teacher?",
            "Are you hiding a secret right now?", "Do you trust your friends?",
            "Have you ever broken a promise?", "Are you nervous about the next question?",
            "Is your heart beating faster?", "Did you lie on Question 4?",
            "Have you ever blamed someone else for your mistake?", "Is there someone you dislike?",
            "Do you check your phone too often?", "Have you ever cheated in a game?",
            "Do you think I can hear your thoughts?", "Are you sweating?",
            "Have you ever kept a secret from your family?", "Is your hand shaking?",
            "Do you like being in control?", "Have you ever pretended to be sick?",
            "Are you afraid of failing?", "HAVE YOU EVER TOLD A LIE THAT HURT SOMEONE?",

            // PHASE 3: DEEP PRESSURE (31-50) - High Intensity
            "Why is your pulse rising?", "Are you ashamed of something you've done?",
            "Do you think you are a good person?", "Have you ever betrayed a trust?",
            "Are you lying to yourself right now?", "What is the secret you'll never tell?",
            "Do you feel guilty about your past?", "Are you afraid of the truth?",
            "Have you ever taken something that wasn't yours?", "Is your breathing irregular?",
            "Do you regret a choice you made recently?", "Are you hiding your true identity?",
            "Is someone watching you?", "Do you feel trapped?",
            "Have you ever wished you were someone else?", "Are you faking your confidence?",
            "Do you think I am getting closer to the truth?", "Is your baseline failing?",
            "ARE YOU PREPARED FOR THE CONSEQUENCES?", "DID YOU LIE TO ME TODAY?"
        ];
        let qCount = 0;
        let introIdx = 0;

        function runIntro() {
            if (introIdx < introPhrases.length) {
                status.innerText = introPhrases[introIdx];
                window.navigator.vibrate([100, 50, 100]); 
                introIdx++;
                setTimeout(runIntro, 3500);
            } else {
                status.innerText = "READY. HOLD BUTTON TO BEGIN.";
                btn.classList.add('active-ready');
            }
        }

        window.onload = runIntro;

        btn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (qCount < questions.length) {
                status.innerText = questions[qCount];
                window.navigator.vibrate(40);
            }
        });

       btn.addEventListener('touchend', () => {
            qCount++;
            
            // Progress bar stays full after 10 but starts "vibrating"
            bar.style.width = Math.min((qCount * 10), 100) + "%";
            if (qCount > 10) bar.style.boxShadow = "0 0 30px #ff0000";

            // The "Liar" Trigger Logic
            // After 10, it has a 20% chance to trigger "LIAR" on every tap
            // Or you can trigger it specifically at 30 or 50.
            let randomStress = Math.random();
            
            if (qCount >= 50 || (qCount > 10 && randomStress > 0.85)) {
                triggerLiarAlarm();
            } else {
                status.innerText = "NEXT QUESTION PREPARING...";
                setTimeout(() => {
                    status.innerText = questions[qCount] || "KEEP HOLDING. I AM WATCHING.";
                }, 500);
            }
        });

        function triggerLiarAlarm() {
            alarmSound.play();
            status.innerText = "LIAR DETECTED!";
            let strobeCount = 0;
            const strobe = setInterval(() => {
                document.body.style.background = (strobeCount % 2 === 0) ? "#FFBF00" : "#550000";
                window.navigator.vibrate(200);
                strobeCount++;
                if (strobeCount > 10) {
                    clearInterval(strobe);
                    document.body.style.background = "#550000";
                }
            }, 150);
        }
    </script>
</body>
</html>
